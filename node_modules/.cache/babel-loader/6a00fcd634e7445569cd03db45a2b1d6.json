{"ast":null,"code":"var _jsxFileName = \"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.3/src/components/GitResource.js\";\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class GitResource extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: \"no\",\n      // options: yes, no, error\n      item: null\n    };\n    this.result = \"\";\n    this.requested = false;\n  }\n\n  getResource(url) {\n    const siteRoot = \"https://github.com\";\n    const re = new RegExp(siteRoot);\n\n    if (!url.match(re)) {\n      const e = `Attempting to load ${url}, it was incorrectly formatted.`;\n      console.error(e);\n      this.setState({\n        loaded: \"error\",\n        errmsg: e\n      });\n      return {};\n    }\n\n    const apiRoot = \"https://raw.githubusercontent.com/\";\n    const call = `${apiRoot}${url.split(siteRoot)[1]}/master/README.md`;\n    console.log(`GET ${call}`);\n    let self = this;\n    fetch(call).then(r => {\n      if (!r.ok) {\n        const e = `Attempting to load ${url}, got status ${r.status}.`;\n        console.error(e);\n        this.setState({\n          loaded: \"error\",\n          errmsg: e\n        });\n      }\n\n      return r;\n    }).then(r => {\n      if (this.state.loaded !== \"error\") {\n        return r.body.getReader();\n      }\n    }, error => {\n      this.setState({\n        loaded: \"error\",\n        errmsg: `Attempting to load ${url}, got error ${error}`\n      });\n    } //processText cant be anonymous because it is recursive\n    ).then(reader => {\n      reader.read().then(function processText(_ref) {\n        let {\n          done,\n          value\n        } = _ref;\n\n        if (done) {\n          //this.setState({loaded: \"yes\", item: value});\n          //self.result += \",101\";\n          const str = new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/)));\n          console.log(str); //console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\n\n          self.setState({\n            loaded: \"yes\",\n            item: str\n          });\n          return;\n        }\n\n        console.log(`Reading...${value.length}`);\n        const chunk = value;\n        self.result += chunk;\n        return reader.read().then(processText);\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (!this.requested) {\n      this.getResource(this.props.url);\n      this.requested = true;\n    }\n  }\n\n  render() {\n    switch (this.state.loaded) {\n      case \"no\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Fetching from github...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this);\n\n      case \"error\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"An error occured\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.state.errmsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"git-resource\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.props.display\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            display: this.props.display,\n            rehypePlugins: [rehypeRaw],\n            children: `${this.state.item}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this);\n    }\n  }\n\n}","map":{"version":3,"names":["React","ReactMarkdown","rehypeRaw","GitResource","Component","constructor","props","state","loaded","item","result","requested","getResource","url","siteRoot","re","RegExp","match","e","console","error","setState","errmsg","apiRoot","call","split","log","self","fetch","then","r","ok","status","body","getReader","reader","read","processText","done","value","str","TextDecoder","decode","Uint8Array","from","length","chunk","componentDidMount","render","display"],"sources":["/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.3/src/components/GitResource.js"],"sourcesContent":["import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\n\nexport class GitResource extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      loaded: \"no\", // options: yes, no, error\n      item: null\n    }\n    this.result = \"\";\n    this.requested = false;\n  }\n\n  getResource(url){\n    const siteRoot = \"https://github.com\";\n    const re = new RegExp(siteRoot);\n    if(!url.match(re)) { \n      const e = `Attempting to load ${url}, it was incorrectly formatted.`;\n      console.error(e);\n      this.setState({loaded: \"error\", errmsg: e}); \n      return {};\n    }\n    const apiRoot = \"https://raw.githubusercontent.com/\";\n    const call = `${apiRoot}${url.split(siteRoot)[1]}/master/README.md`;\n    console.log(`GET ${call}`);\n    let self = this;\n    fetch(call).then(r => {\n      if(!r.ok) {\n        const e = `Attempting to load ${url}, got status ${r.status}.`;\n        console.error(e);\n        this.setState({loaded: \"error\", errmsg: e}); \n      }\n\n        return r;\n    }\n    ).then(\n      (r) => {\n        if(this.state.loaded !== \"error\"){\n          return r.body.getReader();\n        }\n      }, \n      (error) => {\n        this.setState({loaded: \"error\", errmsg: `Attempting to load ${url}, got error ${error}`});\n      }\n      //processText cant be anonymous because it is recursive\n    ).then(reader => { \n        reader.read().then(function processText({done, value}) {\n          if(done){\n            //this.setState({loaded: \"yes\", item: value});\n            //self.result += \",101\";\n            const str = new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/)));\n            console.log(str);\n            //console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\n            self.setState({loaded: \"yes\", item: str});\n            return;\n          }\n          console.log(`Reading...${value.length}`);\n          const chunk = value; \n          self.result += chunk;\n          return reader.read().then(processText);\n        })\n      }\n    );\n  }\n\n  componentDidMount(){ \n    if(!this.requested) { this.getResource(this.props.url); this.requested = true; }\n  }\n\n  render(){\n    switch(this.state.loaded){\n      case \"no\":\n        return( \n          <div>\n            <p>Fetching from github...</p>\n          </div>\n        )\n      case \"error\":\n        return(\n          <div>\n            <h2>An error occured</h2>\n            <p>{this.state.errmsg}</p>\n          </div>\n        )\n      default:\n        return(\n          <div className=\"git-resource\">\n            <p>{this.props.display}</p>\n            <ReactMarkdown display={this.props.display} rehypePlugins={[rehypeRaw]}>{`${this.state.item}`}</ReactMarkdown>\n          </div>\n        )\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}