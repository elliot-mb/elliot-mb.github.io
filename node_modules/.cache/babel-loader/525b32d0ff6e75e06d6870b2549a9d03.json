{"ast":null,"code":"var _jsxFileName = \"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/src/components/GitResource.js\";\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw'; // pasta talking to the github api\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class GitResource extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: \"no\",\n      // options: yes, no, error\n      errmsg: null,\n      code: null,\n      item: null\n    };\n    this.result = \"\";\n    this.requested = false;\n  }\n\n  getResource(url) {\n    const siteRoot = \"https://github.com\";\n    const re = new RegExp(siteRoot);\n\n    if (!url.match(re)) {\n      const e = `Attempting to load ${url}, it was incorrectly formatted.`;\n      console.error(e);\n      this.setState({\n        loaded: \"error\",\n        errmsg: e\n      });\n      return {};\n    }\n\n    const apiRoot = \"https://raw.githubusercontent.com\";\n    const call = `${apiRoot}${url.split(siteRoot)[1]}/master/README.md`;\n    console.log(`GET ${call}`);\n    let self = this;\n    fetch(call).then(r => {\n      //this.setState(c));\n      if (!r.ok) {\n        const e = `Attempting to load ${url}, got status ${r.status}.`;\n        console.error(e);\n        this.setState({\n          loaded: \"error\",\n          errmsg: e\n        });\n        return \"error\";\n      } else {\n        return r.body.getReader();\n      }\n    }).then(reader => {\n      if (reader !== \"error\") {\n        reader.read().then(function processText(_ref) {\n          let {\n            done,\n            value\n          } = _ref;\n\n          if (done) {\n            //this.setState({loaded: \"yes\", item: value});\n            //self.result += \",101\";\n            const str = new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/))); //console.log(str);\n            //console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\n\n            self.setState({\n              loaded: \"yes\",\n              item: str\n            });\n            return;\n          }\n\n          const chunk = value;\n          self.result += chunk;\n          return reader.read().then(processText);\n        });\n      } else {\n        return;\n      }\n    });\n  }\n\n  componentDidMount() {\n    if (!this.requested) {\n      this.getResource(this.props.url);\n      this.requested = true;\n    }\n  }\n\n  render() {\n    if (this.props.display) {\n      switch (this.state.loaded) {\n        case \"no\":\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Fetching from github...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this);\n\n        case \"error\":\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"An error occured\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: this.state.errmsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"This repository may be private.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this);\n\n        default:\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              rehypePlugins: [rehypeRaw],\n              children: `${this.state.item}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this);\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    }\n  }\n\n}","map":{"version":3,"names":["React","ReactMarkdown","rehypeRaw","GitResource","Component","constructor","props","state","loaded","errmsg","code","item","result","requested","getResource","url","siteRoot","re","RegExp","match","e","console","error","setState","apiRoot","call","split","log","self","fetch","then","r","ok","status","body","getReader","reader","read","processText","done","value","str","TextDecoder","decode","Uint8Array","from","chunk","componentDidMount","render","display"],"sources":["/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/src/components/GitResource.js"],"sourcesContent":["import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\n\n\n// pasta talking to the github api\nexport class GitResource extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      loaded: \"no\", // options: yes, no, error\n      errmsg: null,\n      code: null,\n      item: null\n    }\n    this.result = \"\";\n    this.requested = false;\n  }\n\n  getResource(url){\n    const siteRoot = \"https://github.com\";\n    const re = new RegExp(siteRoot);\n    if(!url.match(re)) { \n      const e = `Attempting to load ${url}, it was incorrectly formatted.`;\n      console.error(e);\n      this.setState({loaded: \"error\", errmsg: e}); \n      return {};\n    }\n    const apiRoot = \"https://raw.githubusercontent.com\";\n    const call = `${apiRoot}${url.split(siteRoot)[1]}/master/README.md`;\n    console.log(`GET ${call}`);\n    let self = this;\n    fetch(call).then(r => {\n      //this.setState(c));\n      if(!r.ok) {\n        const e = `Attempting to load ${url}, got status ${r.status}.`;\n        console.error(e);\n        this.setState({loaded: \"error\", errmsg: e}); \n        return \"error\";\n      }else{\n        return r.body.getReader();\n      }\n    }\n    ).then(reader => { \n        if(reader !== \"error\"){\n          reader.read().then(function processText({done, value}) {\n            if(done){\n              //this.setState({loaded: \"yes\", item: value});\n              //self.result += \",101\";\n              const str = new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/)));\n              //console.log(str);\n              //console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\n              self.setState({loaded: \"yes\", item: str});\n              return;\n            }\n            const chunk = value; \n            self.result += chunk;\n            return reader.read().then(processText);\n          })\n        }else{ return; }\n      }\n    );\n  }\n\n  componentDidMount(){ \n    if(!this.requested) { this.getResource(this.props.url); this.requested = true; }\n  }\n\n  render(){\n    if(this.props.display){\n      switch(this.state.loaded){\n        case \"no\":\n          return( \n            <div>\n              <p>Fetching from github...</p>\n            </div>\n          )\n        case \"error\":\n          return(\n            <div>\n              <h2>An error occured</h2>\n              <p>{this.state.errmsg}</p>\n              <p>This repository may be private.</p>\n            </div>\n          )\n        default:\n          return(\n            <div>\n              <ReactMarkdown rehypePlugins={[rehypeRaw]}>{`${this.state.item}`}</ReactMarkdown>\n            </div>\n          )\n      }\n    }else{\n      return(<></>);\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}