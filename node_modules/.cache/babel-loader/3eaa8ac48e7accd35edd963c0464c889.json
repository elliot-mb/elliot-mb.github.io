{"ast":null,"code":"import _classCallCheck from\"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import ReactMarkdown from'react-markdown';import rehypeRaw from'rehype-raw';// pasta talking to the github api\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var GitResource=/*#__PURE__*/function(_React$Component){_inherits(GitResource,_React$Component);var _super=_createSuper(GitResource);function GitResource(props){var _this;_classCallCheck(this,GitResource);_this=_super.call(this,props);_this.state={loaded:\"no\",// options: yes, no, error\nerrmsg:null,code:null,item:null};_this.result=\"\";_this.requested=false;return _this;}_createClass(GitResource,[{key:\"getResource\",value:function getResource(url){var _this2=this;var siteRoot=\"https://github.com\";var re=new RegExp(siteRoot);if(!url.match(re)){var e=\"Attempting to load \".concat(url,\", it was incorrectly formatted.\");console.error(e);this.setState({loaded:\"error\",errmsg:e});return{};}var apiRoot=\"https://raw.githubusercontent.com\";var call=\"\".concat(apiRoot).concat(url.split(siteRoot)[1],\"/master/README.md\");console.log(\"GET \".concat(call));var self=this;fetch(call).then(function(r){//this.setState(c));\nif(!r.ok){var _e=\"Attempting to load \".concat(url,\", got status \").concat(r.status,\".\");console.error(_e);_this2.setState({loaded:\"error\",errmsg:_e});return\"error\";}else{return r.body.getReader();}}).then(function(reader){if(reader!==\"error\"){reader.read().then(function processText(_ref){var done=_ref.done,value=_ref.value;if(done){//this.setState({loaded: \"yes\", item: value});\n//self.result += \",101\";\nvar str=new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/)));//console.log(str);\n//console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\nself.setState({loaded:\"yes\",item:str});return;}var chunk=value;self.result+=chunk;return reader.read().then(processText);});}else{return;}});}},{key:\"componentDidMount\",value:function componentDidMount(){if(!this.requested){this.getResource(this.props.url);this.requested=true;}}},{key:\"render\",value:function render(){if(this.props.display){switch(this.state.loaded){case\"no\":return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Fetching from github...\"})});case\"error\":return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"An error occured\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.errmsg}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"This repository may be private.\"})})]});default:return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ReactMarkdown,{rehypePlugins:[rehypeRaw],children:\"\".concat(this.state.item)})});}}else{return/*#__PURE__*/_jsx(_Fragment,{});}}}]);return GitResource;}(React.Component);","map":{"version":3,"names":["React","ReactMarkdown","rehypeRaw","GitResource","props","state","loaded","errmsg","code","item","result","requested","url","siteRoot","re","RegExp","match","e","console","error","setState","apiRoot","call","split","log","self","fetch","then","r","ok","status","body","getReader","reader","read","processText","done","value","str","TextDecoder","decode","Uint8Array","from","chunk","getResource","display","Component"],"sources":["/home/elliot/Documents/computer-science/personal-projects/web/frameworks/React/personal-webpage/v0.4/src/components/GitResource.js"],"sourcesContent":["import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\n\n\n// pasta talking to the github api\nexport class GitResource extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      loaded: \"no\", // options: yes, no, error\n      errmsg: null,\n      code: null,\n      item: null\n    }\n    this.result = \"\";\n    this.requested = false;\n  }\n\n  getResource(url){\n    const siteRoot = \"https://github.com\";\n    const re = new RegExp(siteRoot);\n    if(!url.match(re)) { \n      const e = `Attempting to load ${url}, it was incorrectly formatted.`;\n      console.error(e);\n      this.setState({loaded: \"error\", errmsg: e}); \n      return {};\n    }\n    const apiRoot = \"https://raw.githubusercontent.com\";\n    const call = `${apiRoot}${url.split(siteRoot)[1]}/master/README.md`;\n    console.log(`GET ${call}`);\n    let self = this;\n    fetch(call).then(r => {\n      //this.setState(c));\n      if(!r.ok) {\n        const e = `Attempting to load ${url}, got status ${r.status}.`;\n        console.error(e);\n        this.setState({loaded: \"error\", errmsg: e}); \n        return \"error\";\n      }else{\n        return r.body.getReader();\n      }\n    }\n    ).then(reader => { \n        if(reader !== \"error\"){\n          reader.read().then(function processText({done, value}) {\n            if(done){\n              //this.setState({loaded: \"yes\", item: value});\n              //self.result += \",101\";\n              const str = new TextDecoder(\"utf-8\").decode(Uint8Array.from(self.result.split(/,/)));\n              //console.log(str);\n              //console.log((Array.of(chars))[0].split(/,/).reduce((x, y) => `${x} ${y}`, \"\"));\n              self.setState({loaded: \"yes\", item: str});\n              return;\n            }\n            const chunk = value; \n            self.result += chunk;\n            return reader.read().then(processText);\n          })\n        }else{ return; }\n      }\n    );\n  }\n\n  componentDidMount(){ \n    if(!this.requested) { this.getResource(this.props.url); this.requested = true; }\n  }\n\n  render(){\n    if(this.props.display){\n      switch(this.state.loaded){\n        case \"no\":\n          return( \n            <div>\n              <p>Fetching from github...</p>\n            </div>\n          )\n        case \"error\":\n          return(\n            <div>\n              <h2>An error occured</h2>\n              <p>{this.state.errmsg}</p>\n              <p><strong>This repository may be private.</strong></p>\n            </div>\n          )\n        default:\n          return(\n            <div>\n              <ReactMarkdown rehypePlugins={[rehypeRaw]}>{`${this.state.item}`}</ReactMarkdown>\n            </div>\n          )\n      }\n    }else{\n      return(<></>);\n    }\n  }\n}"],"mappings":"wtBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,cAAP,KAA0B,gBAA1B,CACA,MAAOC,UAAP,KAAsB,YAAtB,CAGA;6IACA,UAAaC,YAAb,sHACE,qBAAYC,KAAZ,CAAkB,6CAChB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,MAAM,CAAE,IADG,CACG;AACdC,MAAM,CAAE,IAFG,CAGXC,IAAI,CAAE,IAHK,CAIXC,IAAI,CAAE,IAJK,CAAb,CAMA,MAAKC,MAAL,CAAc,EAAd,CACA,MAAKC,SAAL,CAAiB,KAAjB,CATgB,aAUjB,CAXH,mDAaE,qBAAYC,GAAZ,CAAgB,iBACd,GAAMC,SAAQ,CAAG,oBAAjB,CACA,GAAMC,GAAE,CAAG,GAAIC,OAAJ,CAAWF,QAAX,CAAX,CACA,GAAG,CAACD,GAAG,CAACI,KAAJ,CAAUF,EAAV,CAAJ,CAAmB,CACjB,GAAMG,EAAC,8BAAyBL,GAAzB,mCAAP,CACAM,OAAO,CAACC,KAAR,CAAcF,CAAd,EACA,KAAKG,QAAL,CAAc,CAACd,MAAM,CAAE,OAAT,CAAkBC,MAAM,CAAEU,CAA1B,CAAd,EACA,MAAO,EAAP,CACD,CACD,GAAMI,QAAO,CAAG,mCAAhB,CACA,GAAMC,KAAI,WAAMD,OAAN,SAAgBT,GAAG,CAACW,KAAJ,CAAUV,QAAV,EAAoB,CAApB,CAAhB,qBAAV,CACAK,OAAO,CAACM,GAAR,eAAmBF,IAAnB,GACA,GAAIG,KAAI,CAAG,IAAX,CACAC,KAAK,CAACJ,IAAD,CAAL,CAAYK,IAAZ,CAAiB,SAAAC,CAAC,CAAI,CACpB;AACA,GAAG,CAACA,CAAC,CAACC,EAAN,CAAU,CACR,GAAMZ,GAAC,8BAAyBL,GAAzB,yBAA4CgB,CAAC,CAACE,MAA9C,KAAP,CACAZ,OAAO,CAACC,KAAR,CAAcF,EAAd,EACA,MAAI,CAACG,QAAL,CAAc,CAACd,MAAM,CAAE,OAAT,CAAkBC,MAAM,CAAEU,EAA1B,CAAd,EACA,MAAO,OAAP,CACD,CALD,IAKK,CACH,MAAOW,EAAC,CAACG,IAAF,CAAOC,SAAP,EAAP,CACD,CACF,CAVD,EAWEL,IAXF,CAWO,SAAAM,MAAM,CAAI,CACb,GAAGA,MAAM,GAAK,OAAd,CAAsB,CACpBA,MAAM,CAACC,IAAP,GAAcP,IAAd,CAAmB,QAASQ,YAAT,MAAoC,IAAdC,KAAc,MAAdA,IAAc,CAARC,KAAQ,MAARA,KAAQ,CACrD,GAAGD,IAAH,CAAQ,CACN;AACA;AACA,GAAME,IAAG,CAAG,GAAIC,YAAJ,CAAgB,OAAhB,EAAyBC,MAAzB,CAAgCC,UAAU,CAACC,IAAX,CAAgBjB,IAAI,CAACf,MAAL,CAAYa,KAAZ,CAAkB,GAAlB,CAAhB,CAAhC,CAAZ,CACA;AACA;AACAE,IAAI,CAACL,QAAL,CAAc,CAACd,MAAM,CAAE,KAAT,CAAgBG,IAAI,CAAE6B,GAAtB,CAAd,EACA,OACD,CACD,GAAMK,MAAK,CAAGN,KAAd,CACAZ,IAAI,CAACf,MAAL,EAAeiC,KAAf,CACA,MAAOV,OAAM,CAACC,IAAP,GAAcP,IAAd,CAAmBQ,WAAnB,CAAP,CACD,CAbD,EAcD,CAfD,IAeK,CAAE,OAAS,CACjB,CA5BH,EA8BD,CAxDH,iCA0DE,4BAAmB,CACjB,GAAG,CAAC,KAAKxB,SAAT,CAAoB,CAAE,KAAKiC,WAAL,CAAiB,KAAKxC,KAAL,CAAWQ,GAA5B,EAAkC,KAAKD,SAAL,CAAiB,IAAjB,CAAwB,CACjF,CA5DH,sBA8DE,iBAAQ,CACN,GAAG,KAAKP,KAAL,CAAWyC,OAAd,CAAsB,CACpB,OAAO,KAAKxC,KAAL,CAAWC,MAAlB,EACE,IAAK,IAAL,CACE,mBACE,kCACE,8CADF,EADF,CAKF,IAAK,OAAL,CACE,mBACE,oCACE,wCADF,cAEE,mBAAI,KAAKD,KAAL,CAAWE,MAAf,EAFF,cAGE,gCAAG,2DAAH,EAHF,GADF,CAOF,QACE,mBACE,kCACE,KAAC,aAAD,EAAe,aAAa,CAAE,CAACL,SAAD,CAA9B,oBAA+C,KAAKG,KAAL,CAAWI,IAA1D,GADF,EADF,CAhBJ,CAsBD,CAvBD,IAuBK,CACH,mBAAO,kBAAP,CACD,CACF,CAzFH,yBAAiCT,KAAK,CAAC8C,SAAvC"},"metadata":{},"sourceType":"module"}